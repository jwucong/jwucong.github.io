!function(d,p){var u=function(t,e){var r=Object.prototype.toString.call(t).slice(8,-1),n="string"==typeof e?e.trim():null;return n?n.toLowerCase()===r.toLowerCase():r},o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},f=function(t,e){return Math.round(Math.random()*(e-t)+t)},c=function(){var t=[].slice.call(arguments).filter(function(t){return u(t,"Object")});if(t.length<2)return t.length?t[0]:{};var r=t.splice(0,1)[0];return t.forEach(function(t){for(var e in t)o(t,e)&&(r[e]=t[e])}),r},h=function(t,e){var r=e.firstChild;r?e.insertBefore(t,r):e.appendChild(t)},y=function(t){if("function"==typeof t){var e=[].slice.call(arguments,1);t.apply(this,e)}},v=function(t,e,r){var n=[].concat(t),i=p.createElement("div");return i.className=n.join(" "),u(e,"Object")&&function(t,e){var r=[],n="";for(n in e)o(e,n)&&r.push(n.replace(/[A-Z]/g,function(t,e){return(0<e?"-"+t:t).toLowerCase()})+":"+e[n]);t.style.cssText=r.join(";")}(i,e),r&&(i.innerHTML=r),i},g=function(t){var l=!arguments.length||t,a=0,p=null,u=null,c=!1,h=function(){d.cancelAnimationFrame(u),c=!0};return function(n,i,o){var s=function(t){p||(p=t);var e=t-p,r={current:t,previous:a,start:p,delta:e,durationEnd:n<=e};if(l&&r.durationEnd)return d.cancelAnimationFrame(u),y(o,r,h);y(i,r,h),c||(a=t,u=d.requestAnimationFrame(s))};c=!1,u=d.requestAnimationFrame(s)}},t=function(t){this.options=c({},{template:null,container:null,wrapperStyle:null,lineStyle:null,progressStyle:null,classPrefix:"jwc",inlineStyle:!0,duration:1500,stop:"99%",onInited:null,onStart:null,onProgress:null,onEnd:null},t),this.container=null,this.wrapperNode=null,this.lineNode=null,this.progressNode=null,this.waker=null,this.progress=0,this.ended=!1,this.ready=Boolean(p.body),this.queue=[],this.starting=!1,this.ready||function(t,e){if("function"!=typeof t)return;if(p.body)return t.call(e);var r=setInterval(function(){p.body&&(clearInterval(r),t.call(e))},10)}(function(){this.ready=!0,this.queue.forEach(function(t){t.fn.apply(this,t.args)},this),this.queue=[]},this),this.init()};t.prototype.init=function(){var e=this.options;if(!1===e.container)return y.call(this,e.onInited),this;var t=function(t){return[].concat(t).map(function(t){return e.classPrefix+"-"+t})},r=e.container||p.body,n=e.template;if(this.container=r,u(n,"String")&&""!==n.trim()){var i=v("div",null,n).firstChild;return i.classList.add(t("loading").join("")),this.wrapperNode=i,h(this.wrapperNode,this.container),y.call(this,e.onInited),this}var o=function(){return e.inlineStyle?c.apply(null,[].slice.call(arguments)):null},s=v(t("loading"),o({position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:999,backgroundColor:"#fff",opacity:1},e.wrapperStyle)),l=v(t("loading-line"),o({position:"absolute",top:"49%",left:0,width:0,height:0,borderTop:"1px solid #000",transform:"scaleY(0.5)"},e.lineStyle)),a=v(t("loading-progress"),o({position:"absolute",bottom:"35px",left:0,width:"100%",textAlign:"center",fontSize:"12px",color:"#999"},e.progressStyle),"0%");return s.appendChild(l),s.appendChild(a),h(s,r),this.wrapperNode=s,this.lineNode=l,this.progressNode=a,y.call(this,e.onInited),this},t.prototype.setProgress=function(t){t=t<0?0:100<t?100:t;var e=parseInt(this.progress,10),r=parseInt(t,10);this.lineNode&&(this.lineNode.style.width=t+"%"),this.progressNode&&1<=r-e&&(this.progressNode.innerText=r+" %"),this.progress=t,y.call(this,this.options.onProgress,t)},t.prototype.start=function(t){if(this.starting)return this;this.intervalId&&clearInterval(this.intervalId);var o=this,s=this.options,l=parseFloat(s.stop)||99,e=parseInt(t||s.duration,10)||1500,a=0,p=f(5,20),u=f(85,96),r=f(24,30)/10,c=Math.floor(p*r/100*e),h=e-c,d=null,n=function(t,e){var r=o.progress;if(!o.ended&&u<=r){return e(),void(d=setInterval(function(){if(l<=r)return clearInterval(d);r+=.015,f(4,10)/100<=r-a?(o.setProgress(r),a=o.progress):l-r<=.015&&o.setProgress(l)},100))}var n=t.current-t.start==0,i=t.current-t.previous;r<p?r=p<(r+=p/c*(n?17:i))?p:r:r<u?r=u<(r+=u/h*(n?17:i))?u:r:r+=o.ended?1.5:p/c*(n?17:i),o.setProgress(r),100<=o.progress&&(e(),o.starting=!1,o.waker=null,y.call(o,s.onEnd))},i=g(!1);return this.waker=function(){this.starting=!0,i(e,n)},this.waker(),y.call(o,s.onStart),this},t.prototype.end=function(){return this.ended=!0,y.call(this,this.waker),this.waker=null,this},t.prototype.show=function(){return this.wrapperNode&&(this.wrapperNode.style.opacity=1,this.wrapperNode.style.display="block"),this},t.prototype.hide=function(){return this.wrapperNode&&(this.wrapperNode.style.opacity=0,this.wrapperNode.style.display="none"),this},t.prototype.fadeIn=function(t,e){var r=this.wrapperNode;if(!r||"none"!==r.style.display)return this;r.style.opacity=0,r.style.display="block";var n=this,i=parseInt(t,10)||750,o=0,s=function(t){t=t<0?0:1<t?1:t,r.style.opacity=t};return g()(i,function(t){var e=t.current-t.start==0,r=t.current-t.previous;s(o+=1/i*(e?17:r))},function(){o<1&&s(1),y.call(n,e)}),this},t.prototype.fadeOut=function(t,e){var r=this.wrapperNode;if(!r||"none"===r.style.display)return this;r.style.opacity=1,r.style.display="block";var n=this,i=parseInt(t,10)||750,o=1,s=function(t){t=t<0?0:1<t?1:t,r.style.opacity=t};return g()(i,function(t){var e=t.current-t.start==0,r=t.current-t.previous;s(o-=1/i*(e?17:r))},function(){0<o&&s(0),r.style.display="none",y.call(n,e)}),this},t.prototype.remove=function(){return this.wrapperNode&&this.wrapperNode.parentNode.removeChild(this.wrapperNode),this.wrapperNode=null,this.lineNode=null,this.progressNode=null,this},t.prototype.destroy=function(){return this.progress=0,this.ended=!1,this.queue=[],this.remove()};var e=function(e){return function(){var t=[].slice.call(arguments);return this.ready?e.apply(this,t):(this.queue.push({fn:e,args:t}),this)}};for(var r in t.prototype)o(t.prototype,r)&&u(t.prototype[r],"Function")&&"constructor"!==r&&(t.prototype[r]=e(t.prototype[r]));d.JwcLoading=t}(window,document);